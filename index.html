<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>観測室</title>

<style>
body{
 background:#111;
 color:#ddd;
 text-align:center;
 font-family:sans-serif;
 padding-top:8%;
}

iframe{
 border:none;
 margin-top:30px;
}

/* タイトル光 */
h1, p {
 color:#eaf6ff;
 animation:breathe 4s ease-in-out infinite;
}

@keyframes breathe {
 0% { text-shadow: 0 0 6px rgba(0,255,140,0.6), 0 0 16px rgba(0,255,140,0.4); }
 50% { text-shadow: 0 0 16px rgba(0,255,140,1), 0 0 32px rgba(0,255,140,0.8); }
 100% { text-shadow: 0 0 6px rgba(0,255,140,0.6), 0 0 16px rgba(0,255,140,0.4); }
}

/* 状態表示 */
.statusBox{
 position:absolute;
 top:15px;
 left:15px;
 padding:6px 14px;
 background:#000a;
 color:#b6ffb6;
 font-weight:bold;
 border-radius:6px;
 letter-spacing:2px;
}

/* LIVE表示 */
.live{
 color:#ff3b3b;
}

.dot{
 height:10px;
 width:10px;
 margin-right:6px;
 background:#ff3b3b;
 border-radius:50%;
 display:inline-block;
 animation:blink 1s infinite;
}

@keyframes blink{
 0%{opacity:1;}
 50%{opacity:.3;}
 100%{opacity:1;}
}

.liveWrap{
 position:relative;
 display:inline-block;
}

button{
 margin-top:25px;
 padding:10px 20px;
 background:#111;
 color:#fff;
 border:1px solid #444;
 cursor:pointer;
}
button:hover{
 background:#222;
}
</style>
</head>

<body>

<h1>この空間は公開されています</h1>

<p>音声はありません。</p>
<p>干渉はできません。</p>
<p>この映像は公開されています。</p>

<p>This space is being observed.</p>
<p>No audio is transmitted.</p>
<p>This video is publicly available.</p>

<p dir="rtl">هذه المساحة تحت المراقبة</p>
<p dir="rtl">لا يوجد صوت</p>
<p dir="rtl">هذا الفيديو متاح للعامة</p>


<div class="liveWrap">

<div id="status" class="statusBox">STATUS UNKNOWN</div>

<iframe
id="liveFrame"
width="900"
height="506"
src="https://www.youtube.com/embed/live_stream?channel=UC9W371pV3VHzn3BP3B61Drg"
allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
allowfullscreen>
</iframe>

</div>

<br>
<button onclick="playRandom()">ランダムアーカイブ再生</button>

<script>

/* =========================
   ライブ判定
========================= */

const frame=document.getElementById("liveFrame");
const status=document.getElementById("status");

frame.addEventListener("load",()=>{
 setTimeout(()=>{
  try{
   const url=frame.contentWindow.location.href;

   if(url.includes("watch")){
     status.innerHTML='<span class="dot"></span>LIVE';
     status.classList.add("live");
   }else{
     status.textContent="STATUS UNKNOWN";
     status.classList.remove("live");
   }

  }catch{
   status.textContent="STATUS UNKNOWN";
  }
 },1500);
});


/* =========================
   ランダム動画
========================= */

const videos=[
"jtHBEX1xwao",
"Z1aGd8W2br0",
"i5iGwcwmgAw"
];

function playRandom(){
 const random=videos[Math.floor(Math.random()*videos.length)];
 frame.src="https://www.youtube.com/embed/"+random+"?autoplay=1";

 status.textContent="ARCHIVE PLAYBACK";
 status.classList.remove("live");
}

</script>

</body>
</html>
